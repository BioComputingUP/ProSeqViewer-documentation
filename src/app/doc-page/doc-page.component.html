
<div class="container-xl">
  <div class="sidenav">
    <a (click)="scroll(installation)"><h5><b>Installation</b></h5></a>
    <a (click)="scroll(input)"><h6>Input</h6></a>
    <a (click)="scroll(events)"><h6>Events</h6></a>
  </div>


    <div class="row">
      <div class="col">

      <h1 class="txt">Documentation</h1>
        <p>
          ProSeqViewer is a TypeScript library implemented to be compatible with modern applications
          (both Angular and pure JavaScript supported). It is lightweight, fast, interactive, dynamic,
          responsive and it adapts to any screen size. It generates pure HTML which is compatible with
          any browser and operating system.

          The source code is available on <a href="https://github.com/BioComputingUP/ProSeqViewer">Github</a>

        </p>
        <p>
          <b>Note:</b> Loading of long sequences (>10.000 amino acids) takes a few seconds. The ProSeqViewer is ready
          when the DOM element becomes not empty. In Angular you can check a DOM with document.getElementById(proseqviewer_dom_id)
        </p>

        <div class="snippet-card" #installation>

        </div>
    </div>

    <div class="row">
      <div class="col">
        <div>
          <h6 class="snippet-title" id="javascript">JavaScript installation</h6>

          <p>
            Import the JavaScript bundle and CSS from local files
          </p>

          <pre><code [highlight]="code0" [languages]="['xml']"></code></pre>

          <p>
            Alternatively, import from GitHub
          </p>
          <pre><code [highlight]="code1" [languages]="['xml']"></code></pre>

          <p>
            Add component
          </p>
          <pre><code [highlight]="code2" [languages]="['xml']"></code></pre>

          <p>
            Create an instance
          </p>
          <pre><code [highlight]="code3" [languages]="['xml']"></code></pre>


          <h6 class="snippet-title">Angular installation</h6>

          <p>
            Install ProSeqViewer from NPM
          </p>
          <pre><code [highlight]="code4" [languages]="['typescript']"></code></pre>

          <p>Add ProSeqViewer CSS to your angular.json file</p>
          <pre><code [highlight]="code5" [languages]="['json']"></code></pre>

          <p>Import in your component</p>
          <pre><code [highlight]="code6" [languages]="['typescript']"></code></pre>

          <p>Add component to your page</p>
          <pre><code [highlight]="code7" [languages]="['xml']"></code></pre>


          <p>Create an instance in your component</p>
          <pre><code [highlight]="code8" [languages]="['typescript']"></code></pre>


          <h6 class="snippet-title" #input>Input fields</h6>
          <p>ProSeqViewer provides a method <i><b>draw</b></i> that takes a JSON object with five keys</p>

          <pre><code [highlight]="codeType" [languages]="['typescript']"></code></pre>

        </div>
      </div>
      <div class="row">
        <div class="col">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Object</th>
                <th scope="col">Field</th>
                <th scope="col">Type</th>
                <th scope="col">Example</th>
                <th scope="col">Description</th>
              </tr>
            </thead>
            <tbody>

              <!-- block -->
              <tr>
                <th rowspan="5" scope="row" class="first-col">sequences</th>
                <td class="second-col">sequence</td>
                <td>string</td>
                <td>LYRLELERECAMT</td>
                <td>Sequence of characters</td>
              </tr>

              <tr>
                <td class="second-col">id</td>
                <td>integer</td>
                <td>1</td>
                <td> Identifier of the sequence</td>
              </tr>
              <tr>
                <td class="second-col">label</td>
                <td>string</td>
                <td>1XVZ</td>
                <td>Lateral label</td>
              </tr>
              <tr>
                <td class="second-col">labelTooltip</td>
                <td>html</td>
                <td>
                  &#x3C;span &#x3E; ... &#x3C;/span&#x3E;
                </td>
                <td>Styled HTML of the tooltip</td>
              </tr>
              <tr>
                <td class="second-col">startIndex</td>
                <td>integer</td>
                <td>30</td>
                <td>Start index of the input sequence. Shown when lateralIndexes: true</td>
              </tr>

              <!-- block -->
              <tr>
                <th rowspan="8" scope="row" class="first-col">regions</th>
                <td class="second-col">sequenceId</td>
                <td>integer</td>
                <td>1</td>
                <td>Identifier of the sequence</td>
              </tr>

              <tr>
                <td class="second-col">start</td>
                <td>integer</td>
                <td>10</td>
                <td>Start position of the region to color</td>
              </tr>
              <tr>
                <td class="second-col">end</td>
                <td>integer</td>
                <td>20</td>
                <td>End position of the region to color</td>
              </tr>
              <tr>
                <th rowspan="2" scope="row" class="second-col">color</th>
                <td>string</td>
                <td>#9C7DA6</td>
                <td>Color the character (Hex)</td>
              </tr>
              <tr>
                <td>string</td>
                <td>rgb(156, 125, 166)</td>
                <td>Color the character (RGB)</td>
              </tr>
              <tr>
                <th rowspan="2" scope="row" class="second-col">backgroundColor</th>
                <td>string</td>
                <td>#9C7DA6</td>
                <td>Color the character background (Hex)</td>
              </tr>
              <tr>
                <td>string</td>
                <td>rgb(156, 125, 166)</td>
                <td>Color the character background (RGB)</td>
              </tr>
              <tr>
                <td class="second-col">backgroundImage</td>
                <td>string</td>
                <td>linear-gradient(red, yellow)</td>
                <td>Color the character background with a two color gradient</td>
              </tr>

              <!-- block -->
              <tr>
                <th rowspan="9" scope="row" class="first-col">patterns</th>
                <td class="second-col">sequenceId</td>
                <td>integer</td>
                <td>1</td>
                <td>Identifier of the sequence</td>
              </tr>

              <tr>
                <td class="second-col">start</td>
                <td>integer</td>
                <td>10</td>
                <td>Start position of the region where to perform the regex</td>
              </tr>
              <tr>
                <td class="second-col">pattern</td>
                <td>string</td>
                <td>AAA</td>
                <td>Regex pattern to find in the sequence</td>
              </tr>
              <tr>
                <td class="second-col">end</td>
                <td>integer</td>
                <td>20</td>
                <td>End position of the region where to perform the regex</td>
              </tr>
              <tr>
                <th rowspan="2" scope="row" class="second-col">color</th>
                <td>string</td>
                <td>#9C7DA6</td>
                <td>Color the character (Hex)</td>
              </tr>
              <tr>
                <td>string</td>
                <td>rgb(156, 125, 166)</td>
                <td>Color the character (RGB)</td>
              </tr>
              <tr>
                <th rowspan="2" scope="row" class="second-col">backgroundColor</th>
                <td>string</td>
                <td>#9C7DA6</td>
                <td>Color the character background (Hex)</td>
              </tr>
              <tr>
                <td>string</td>
                <td>rgb(156, 125, 166)</td>
                <td>Color the character background (RGB)</td>
              </tr>
              <tr>
                <td class="second-col">backgroundImage</td>
                <td>string</td>
                <td>linear-gradient(red, yellow)</td>
                <td>Color the regex match character background with a two color gradient</td>
              </tr>

              <!-- block -->
              <tr>
                <th rowspan="6" scope="row" class="first-col">icons</th>
                <td class="second-col">sequenceId</td>
                <td>integer</td>
                <td>1</td>
                <td>Identifier of the sequence</td>
              </tr>

              <tr>
                <td class="second-col">start</td>
                <td>integer</td>
                <td>10</td>
                <td>Start position of the icon region</td>
              </tr>
              <tr>
                <td class="second-col">end</td>
                <td>integer</td>
                <td>20</td>
                <td>End position of the icon region</td>
              </tr>
              <tr>
                <th rowspan="2" scope="row" class="second-col">icon</th>
                <td>string</td>
                <td>helix</td>
                <td>Predefined icons: <kbd>lollipop</kbd>, <kbd>helix</kbd>, <kbd>strand</kbd>, <kbd>strand</kbd>, <kbd>arrow-left</kbd>, <kbd>turn</kbd></td>
              </tr>
              <tr>
                <td>html</td>
                <td>&#x3C;svg&#x3E; ... &#x3C;/svg&#x3E;</td>
                <td>Custom svg image to apply on top of the indicated sequence</td>
              </tr>
              <tr>
                <td class="second-col">display</td>
                <td>string</td>
                <td>center</td>
                <td>Center the icon in the middle of the region</td>
              </tr>

              <!-- block -->
              <tr>
                <th rowspan="4" scope="row" class="first-col">consensus</th>
                <td class="second-col">dotThreshold</td>
                <td>integer</td>
                <td>90</td>
                <td>Below this threshold displays a dot <kbd>.</kbd> symbol instead of the conserved AA</td>
              </tr>
              <tr>
                <th rowspan="3" scope="row" class="second-col">color</th>
                <td>string</td>
                <td>identity</td>
                <td>
                  Color the consensus based on conserved properties in MSA columns. <kbd>identity</kbd> sequence identity.
                  <kbd>physical</kbd> conserved physico-chemical properties, it also replace consensus AAs with symbols
                </td>
              </tr>
              <tr>
                <td>obj</td>
                <td>{{"{90: ['#0A0A0A', '#FFFFFF'], ... }"}}</td>
                <td>
                  Custom colors based on identity thresholds
                  <div class="example">&#123;&#x3C;level&#x3E;:[&#x3C;background_color&#x3E;, &#x3C;color&#x3E;], ... &#125;</div>
                </td>
              </tr>
              <tr>

                <td>obj</td>
                <td>{{"{'A': ['+', '#3626A7', '#FFFFFF'], ... }"}}</td>
                <td>
                  Custom colors based on type of conserved AA
                  <div class="example">&#123;&#x3C;amino_acid&#x3E;: [&#x3C;symbol&#x3E;, &#x3C;background_color&#x3E;, &#x3C;color&#x3E;], ... &#125;</div>
                </td>
              </tr>

              <!-- block -->
              <tr>
                <th rowspan="11" scope="row" class="first-col">options</th>
                <td class="second-col">fontSize</td>
                <td>string</td>
                <td>14px</td>
                <td>Font size (px, em, vw)</td>
              </tr>

              <tr>
                <td class="second-col">chunkSize</td>
                <td>integer</td>
                <td>10</td>
                <td>Size of the chunks (number of AA)</td>
              </tr>
              <tr>
                <td class="second-col">chunkSeparation</td>
                <td>integer</td>
                <td>2</td>
                <td>Space between two chunks (px)</td>
              </tr>
              <tr>
                <td class="second-col">lineSeparation</td>
                <td>integer</td>
                <td>15</td>
                <td>Space below each sequence (px)</td>
              </tr>
<!--              <tr>-->
<!--                <td class="second-col">lateralIndexes</td>-->
<!--                <td>bool</td>-->
<!--                <td>true</td>-->
<!--                <td>Place the index on the left, between the label and the sequence</td>-->
<!--              </tr>-->
              <tr>
                <td class="second-col">indexesLocation</td>
                <td>string</td>
                <td>top</td>
                <td>
                  <kbd>top</kbd> place the index on top of each chunk (first row only).
                  <kbd>lateral</kbd> place  the index on the left, between the label and the sequence.
                  <kbd>both</kbd> add both indexes
                </td>
              </tr>
              <tr>
                <td class="second-col">wrapLine</td>
                <td>bool</td>
                <td>true</td>
                <td>Dynamically wrap sequences when the size of the window changes</td>
              </tr>
              <tr>
                <td class="second-col">viewerWidth</td>
                <td>integer</td>
                <td>300</td>
                <td>Width of the viewer (px). If not provided the viewer expands up to the width of the parent element</td>
              </tr>
              <tr>
                <th rowspan="3" scope="row" class="second-col">sequenceColor</th>
                <td>string</td>
                <td>blosum62</td>
                <td>
                  Amino acid coloring. <kbd>blosum62</kbd> substitution score (only positive) with respect to the first sequence in the MSA.
                  <a href="https://www.jalview.org/help/html/colourSchemes/index.html">Jalview color schemes</a>:
                  <kbd>clustal</kbd>, <kbd>zappo</kbd>, <kbd>taylor</kbd>, <kbd>hydrophobicity</kbd>, ...
                </td>
              </tr>
              <tr>
                <td>obj</td>
                <td>{{"{'A': '#80a0f0', .. }"}}</td>
                <td>Custom colorscheme
                  <div class="example">&#123;&#x3C;amino_acid&#x3E;: &#x3C;background_color&#x3E;, ... &#125;</div>
                </td>
              </tr>
              <tr>
                <td>obj</td>
                <td>{{"{'KR': [ '#C0CFED', '#000000'], .. }"}}</td>
                <td>Custom color matrix
                  <div class="example">&#123;&#x3C;amino_acid_pair&#x3E;: [&#x3C;background_color&#x3E;, &#x3C;color&#x3E;], ... &#125;</div>
                </td>
              </tr>

            </tbody>

          </table>

        </div>
      </div>
      </div>





    <!-------------------------------------  EVENTS  EXAMPLE ---------------------------------------->
    <h6 #events class="snippet-title">Events</h6>
    <p>
      ProSeqViewer provides two different types of events, <b>area selection</b> and <b>double click</b>, which capture
      user interactions with the viewer
    </p>

    <p><b>Area selection</b></p>
    <p>
      Left click and drag the mouse to select an area of text (amino acids). The region get highlighted in yellow. Use the
      shortcut <kbd>Ctrl+C</kbd> to copy and <kbd>Ctrl+V</kbd> to paste.
      The highlight disappear after clicking outside the selected area
    </p>
      <pre><code [highlight]="code10" [languages]="['typescript']"></code></pre>


    <p><b>Double click</b></p>
    <p>
      Double click returns information about the clicked character: x, y positions and the character itself
    </p>
    <pre><code [highlight]="code11" [languages]="['typescript']"></code></pre>


      <h6 #events class="snippet-title">Events test</h6>

      <div id="sqv9" class="sqvDemo"></div>

      <div class="row">
        <div class="col-9">
          <div class="box">
            <form>
              <label for="subject">
                Drag the mouse over the viewer above and try to <kbd>Ctrl+C</kbd> and <kbd>Ctrl+V</kbd> in the box below
              </label>
              <button class="btn btn-outline-secondary" type="reset">Reset</button>
              <textarea id="subject" name="subject" placeholder="Drag the mouse over the viewer above and try to Ctrl+C and Ctrl+V here" style="height:200px"></textarea>

            </form>
          </div>
        </div>

        <div class="col-3">
          <div class="box">
            <form>

                <label for="subject">See double click event</label>

                <div>Selected char: {{selectedChar}}</div>
                <div>Position X: {{positionX}}</div>
                <div>Position Y: {{positionY}}</div>

            </form>
          </div>
        </div>
      </div>





</div>
</div>
